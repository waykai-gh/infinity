# Background and Motivation
Нужно собрать единую документацию по всему проекту (боты, AI-бэкенд, VPN-сервис, сайт, инфраструктура). Итог: один консолидированный документ, описывающий назначение директорий и файлов, зависимости, настройки окружения, процессы сборки/запуска и деплоя.

Новый запрос: выяснить и устранить проблему установки Prisma (`npm install @prisma/client prisma`), падает с `ECONNRESET` при загрузке @prisma/engines (Windows, Node 22.20.0).

# Key Challenges and Analysis
- Много сервисов (минимум 4) + вспомогательные каталоги; важно не пропустить части.
- Часть сведений размазана по Dockerfile, package.json, .env — нужно аккуратно сводить.
- Есть ранее описанные требования по Postgres/Ollama; нужно понять, что уже реализовано и что документировать как «текущие возможности».
- Документация должна быть воспроизводимой: где брать токены, какие команды запускать, что требуется для разработки/продакшна.
- Имеются артефакты `site/` и `vpn-service-backend/` — надо решить, включать ли их и как кратко описать, даже если сейчас не активны.

# High-level Task Breakdown
1) Инвентаризация репозитория
   - Действия: собрать дерево верхнего уровня (`bot`, `xor-bot`, `backend/*`, `site`, `.cursor/docs` и т.д.) с краткими описаниями назначения.
   - Критерии успеха: список всех основных каталогов с 1‑2 предложениями, зачем они нужны.

2) Сервисные детали (bot, xor-bot, ai-service-backend, vpn-service-backend)
   - Действия: из `package.json`, `Dockerfile`, `src/` вынуть языки, зависимости, точки входа, команды запуска.
   - Критерии успеха: для каждого сервиса есть блок «назначение / ключевые файлы / настройки / запуск».

3) Веб-сайт и фронтовые артефакты
   - Действия: описать структуру `site/` (страницы, стили, скрипты), указать, как собирать/развёртывать (если статически, то отметить).
   - Критерии успеха: отдельный раздел в документации с обзором `site/`.

4) Инфраструктура и конфигурации
   - Действия: разобрать `docker-compose.yml`, общие сети/тома, переменные `.env`, зависимость от Ollama/Postgres.
   - Критерии успеха: чёткое описание, какие сервисы поднимаются, какие ENV обязательны/опциональны, как подключается Ollama.

5) Существующие внутренние документы
   - Действия: просмотреть `.cursor/documentation/*`, выписать назначение и статус (актуальны/заглушки).
   - Критерии успеха: раздел «Документы в репозитории» с ссылками и кратким содержанием.

6) Сбор итоговой документации
   - Действия: агрегировать всё выше в единый текст (структура: Обзор → Сервисы → Инфраструктура → Настройки → Документы → TODO/гепы).
   - Критерии успеха: документ покрывает весь проект, без пробелов по сервисам и конфигам; ссылки на файлы/директории даны в формате `path/to/file`.

7) Диагностика установки Prisma (новая задача)
   - Действия: собрать конфиг npm (proxy/registry), проверить доступ к registry.npmjs.org и download.prisma.sh, повторить установку с флагами `--registry=https://registry.npmjs.org` и `npm config set fetch-retries 5`, при необходимости использовать прямую загрузку бинарей через `PRISMA_*_MIRROR` или переключить Node на LTS 20.x.
   - Критерии успеха: команда `npm install @prisma/client prisma` завершается без ошибок; Prisma CLI доступен (`npx prisma -v`), генерация бинари проходит.

# Project Status Board
- [ ] Инвентаризация репозитория
- [ ] Сервисные детали (bot/xor-bot/ai-service-backend/vpn-service-backend)
- [ ] Описание сайта
- [ ] Инфраструктура и ENV
- [ ] Обзор внутренних docs
- [ ] Консолидация итоговой документации
- [ ] Диагностика установки Prisma

# Current Status / Progress Tracking
Ожидаю подтверждения плана; после этого можно выполнять задачи по порядку (одна за другой) и заполнять информацию в итоговую доку. Новая задача по Prisma готова к исполнению (нужно последовательно проверить сеть/registry/версию Node).

# Executor's Feedback or Assistance Requests
- Нужна ли отдельная секция про будущие планы (Postgres интеграция, если ещё не реализована), или фиксируем только текущее состояние?
- Следует ли включать подробности по `vpn-service-backend`, если он пустой/заготовка?

# Lessons
(пока пусто; будет заполняться исполнителем)