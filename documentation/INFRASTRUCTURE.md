# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Infinity ‚Äî –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–æ–±—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å–µ—Ä–≤–µ—Ä—ã](#–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–∏-—Å–µ—Ä–≤–µ—Ä—ã)
4. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–ø—Ä–æ–µ–∫—Ç–∞)
5. [VPN —Å–µ—Ä–≤–∏—Å (Xray)](#vpn-—Å–µ—Ä–≤–∏—Å-xray)
6. [Telegram –±–æ—Ç—ã](#telegram-–±–æ—Ç—ã)
7. [AI —Å–µ—Ä–≤–∏—Å](#ai-—Å–µ—Ä–≤–∏—Å)
8. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
9. [–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)
10. [–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è development

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd infinity-project

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
npm install  # –≤ –∫–æ—Ä–Ω–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è monorepo
cd bot && npm install
cd ../xor-bot && npm install
cd ../backend/ai-service-backend && npm install
cd ../../..

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–æ–≤
# bot/.env
cat > bot/.env << 'EOF'
BOT_TOKEN=<your-telegram-bot-token>
HTTP_PORT=3001
XRAY_API_HOST=127.0.0.1
XRAY_API_PORT=10085
XRAY_ADMIN_TOKEN=<your-secret-token>
XRAY_INBOUND_TAG=vless-inbound
EOF

# xor-bot/.env
cat > xor-bot/.env << 'EOF'
BOT_XOR_TOKEN=<your-xor-bot-token>
AI_BASE_URL=http://ai-service-backend:3000
EOF

# backend/ai-service-backend/.env
cat > backend/ai-service-backend/.env << 'EOF'
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=gemma:7b
EOF

# –ó–∞–ø—É—Å–∫ Docker Compose (–ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
docker-compose up --build

# –ò–õ–ò –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
cd bot && npm run dev
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
cd xor-bot && npm run dev
# –í –µ—â—ë –æ–¥–Ω–æ–º:
cd backend/ai-service-backend && npm start
```

### Production —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É mySrv
ssh vpnadmin@62.181.44.4

# 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–æ–µ–∫—Ç
cd infinity

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ —Å GitHub
git pull origin main

# 4. –ó–∞–ø—É—Å–∫ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã
docker-compose up -d

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
docker-compose logs -f

# 6. –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞
docker-compose up -d --build
```

---

## –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ  Telegram     ‚îÇ  ‚îÇ  Web Browser ‚îÇ  ‚îÇ  VPN –ö–ª–∏–µ–Ω—Ç      ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  (@...bot)    ‚îÇ  ‚îÇ  (site/)     ‚îÇ  ‚îÇ  (v2rayN, etc)   ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                  ‚îÇ                  ‚îÇ
         ‚îÇ Long Poll        ‚îÇ HTTP             ‚îÇ TCP:8443 (VLESS+Reality)
         ‚îÇ                  ‚îÇ                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –°–ï–†–í–ï–† MYSRV (62.181.44.4)                      ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Docker Compose Orchestration                                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Telegram Bot ‚îÇ  ‚îÇ Xray-Bot    ‚îÇ  ‚îÇ AI Service       ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ (@...main)   ‚îÇ  ‚îÇ (@...xor)   ‚îÇ  ‚îÇ (backend:3000)   ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ (port 3001)  ‚îÇ  ‚îÇ (no port)   ‚îÇ  ‚îÇ + Ollama         ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                  ‚îÇ                  ‚îÇ              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ           Shared Network (app-network)           ‚îÇ       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Service discovery via Docker DNS              ‚îÇ      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - Internal communication without ports          ‚îÇ     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ         Xray VPN Server (8443)              ‚îÇ      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - VLESS + Reality (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ https)   ‚îÇ      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - gRPC API –Ω–∞ 127.0.0.1:10085              ‚îÇ      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  - iptables NAT + IP Forwarding             ‚îÇ      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ             ‚îÇ TCP:8443                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ              –ò–Ω—Ç–µ—Ä–Ω–µ—Ç                            ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤)                ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                                          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  PostgreSQL –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  (–ø–æ–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–ª–∞–Ω–∞—Ö, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
Infinity Project
‚îú‚îÄ‚îÄ bot/ (–æ—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç (@NNfinity))
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ subscrice.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exports.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ infinityAI.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ productCommands.ts(–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄconsts/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄproducts.ts(–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄmodels/(—Ñ–∞–π–ª—ã –ø—É—Å—Ç—ã–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xray-service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xrayService.ts (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Xray API)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xtlsClient.ts (gRPC –∫–ª–∏–µ–Ω—Ç)
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ xrayRoutes.ts (Express –º–∞—Ä—à—Ä—É—Ç—ã)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user-service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄuserService.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db-service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄmigration/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ      ‚îú‚îÄ‚îÄ001_init.sql
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ      ‚îî‚îÄ‚îÄ001_User_init.sql
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vpn-service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄvpnService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ .env
‚îÇ   ‚îú‚îÄ‚îÄ .env.example (—É–¥–∞–ª–∏—Ç—å, –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∑–∞—á–µ–º –æ–Ω–∞)
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore
‚îÇ   ‚îú‚îÄ‚îÄ package-lock.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ xor-bot/ (AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –±–æ—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai-files/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ xor.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ aiMainCommands.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ ai-service-backend/ (API –¥–ª—è –ò–ò)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ neuralNetwork.ts (SimpleNN –¥–ª—è XOR)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ vpn-service-backend/ (–∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±—É–¥—É—â–µ–≥–æ)
‚îÇ
‚îú‚îÄ‚îÄ site/ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–µ–±-—Å–∞–π—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îú‚îÄ‚îÄ vpn/
‚îÇ   ‚îú‚îÄ‚îÄ convert/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ img/
‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ
‚îú‚îÄ‚îÄ documentation/ (–∑–∞–≥–æ—Ç–æ–≤–∫–∏ –ø–æ–¥ –¥–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ vpn-docs/
‚îÇ   ‚îî‚îÄ‚îÄ xor-docs/
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml (–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ package.json (–∫–æ—Ä–Ω–µ–≤–æ–π, –µ—Å–ª–∏ monorepo)
```

---

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Å–µ—Ä–≤–µ—Ä—ã

### –¢–µ–∫—É—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã VPN

| –õ–æ–∫–∞—Ü–∏—è | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | IPv4 | –°—Ç–∞—Ç—É—Å | Xray API | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---------|-----------|------|--------|----------|------------|
| **–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω** | vultr.com | 91.207.75.142 | ‚úÖ Production | ‚ùå –ù–µ—Ç | –°—Ç–∞—Ä–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API |
| **–ê–º—Å—Ç–µ—Ä–¥–∞–º** | firstvds.ru | 95.81.100.44 | ‚è≥ –ù–∞ –æ—á–µ—Ä–µ–¥–∏ | ‚úÖ –î–∞ | API –≤–∫–ª—é—á–µ–Ω, –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã |
| **–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è** | vultr.com | 141.164.45.6 | ‚úÖ –ì–æ—Ç–æ–≤ | ‚úÖ –î–∞ | API –≤–∫–ª—é—á–µ–Ω, —Ç–µ—Å—Ç–æ–≤—ã–π —é–∑–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç |

### –•–æ—Å—Ç–∏–Ω–≥ –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–°–µ—Ä–≤–µ—Ä mySrv:**
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä:** firstvds.ru
- **IPv4:** 62.181.44.4
- **–û–°:** Debian 13 (–∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è)
- **–ü–û:** Docker, Docker Compose, Git, Node.js 20.x
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** SSH —Å –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º –∏–ª–∏ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞
- **–ü—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞:** `/home/admin/infinity` (–∏–ª–∏ —Å—Ö–æ–∂–∏–π)

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã:**
- `22` ‚Äî SSH —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `3001` ‚Äî HTTP API –±–æ–µ–≤–æ–≥–æ –±–æ—Ç–∞ (Express)
- `8443` ‚Äî VLESS+Reality Xray (–≤–Ω–µ—à–Ω–∏–π)
- `10085` ‚Äî Xray gRPC API (—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π, 127.0.0.1)

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### 1. –û—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç (`bot/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**–§—É–Ω–∫—Ü–∏–∏:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–µ–Ω—é —É—Å–ª—É–≥ (VPN, AI, –ø–æ–¥–ø–∏—Å–∫–∞)
- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
- –ü–æ–º–æ—â—å/–ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–°—Ç–µ–∫:**
- TypeScript + Node.js
- grammY –¥–ª—è Telegram API
- grammy hydrate –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
- Express HTTP —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 3001)

**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `bot/src/index.ts`

**–ö–æ–º–∞–Ω–¥—ã:**
- `/start` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `/profile` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–∏–º—è, ID)
- Callback –∫–Ω–æ–ø–∫–∏:
  - `services` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å VPN, AI
  - `subscrice` ‚Üí —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
  - `profile` ‚Üí –ø—Ä–æ—Ñ–∏–ª—å

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```
BOT_TOKEN=<telegram-bot-token>
HTTP_PORT=3001 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
XRAY_API_HOST=127.0.0.1 –∏–ª–∏ IP —Å–µ—Ä–≤–µ—Ä–∞ Xray
XRAY_API_PORT=10085
XRAY_ADMIN_TOKEN=<secret-token-–¥–ª—è-API>
XRAY_INBOUND_TAG=vless-inbound (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

**Dockerfile:**
- Base image: `node:20.5.0`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–≤–∫–ª—é—á–∞—è dev)
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `src/`
- –ó–∞–ø—É—Å–∫: `npm run dev` (hot-reload mode)

**–ó–∞–ø—É—Å–∫:**
```bash
# Development (—Å watch mode)
npm run dev

# Build
npm run build

# Production
npm run start:prod
```

---

### 2. XOR Telegram –±–æ—Ç (`xor-bot/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ß–∞—Ç —Å –ò–ò (Gemma/Qwen) –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è XOR-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π

**–§—É–Ω–∫—Ü–∏–∏:**
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- –õ—é–±–æ–π —Ç–µ–∫—Å—Ç ‚Äî –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –≤ AI —Å–µ—Ä–≤–∏—Å (`POST /api/llm`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

**–°—Ç–µ–∫:**
- TypeScript + Node.js
- grammY –¥–ª—è Telegram API
- node-fetch –¥–ª—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI

**–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `xor-bot/src/index.ts`

**–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/ai-files/xor.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `/api/xor-predict`
- `src/ai-files/aiMainCommands.ts` ‚Äî –∑–∞–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–¥ callback-–∫–æ–º–∞–Ω–¥—ã

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```
BOT_XOR_TOKEN=<telegram-bot-token>
AI_BASE_URL=http://ai-service-backend:3000 (–≤ Docker)
```

**–ó–∞–ø—É—Å–∫:**
```bash
npm run dev  # development
npm run build && npm run start:prod  # production
```

---

### 3. AI —Å–µ—Ä–≤–∏—Å (`backend/ai-service-backend/`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Ollama –∏ –º–∞–ª–µ–Ω—å–∫–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ XOR

**API endpoints:**

```
GET /health/ollama
  Response: { ok: true, models: [...] } –∏–ª–∏ 503
  
POST /api/llm
  Body: { prompt: string, model?: string, options?: {...} }
  Response: { model: string, response: string } –∏–ª–∏ –æ—à–∏–±–∫–∞

POST /api/xor-predict
  Body: { x: [number, number] }
  Response: { result: number }
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama:**
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `OLLAMA_BASE_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://ollama:11434`)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª—å –∏–∑ `OLLAMA_MODEL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `gemma:7b`)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç —Å `stream: false` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

**–ù–µ–π—Ä–æ—Å–µ—Ç—å XOR:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `src/neuralNetwork.ts`
- –ü—Ä–æ—Å—Ç–∞—è –ø–æ–ª–Ω–æ—Å–≤—è–∑–Ω–∞—è —Å–µ—Ç—å: 2 –≤—Ö–æ–¥–∞ ‚Üí 4 —Å–∫—Ä—ã—Ç—ã—Ö –Ω–µ–π—Ä–æ–Ω–∞ ‚Üí 1 –≤—ã—Ö–æ–¥
- –°–∏–≥–º–æ–∏–¥–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
- –û–±—Ä–∞—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ (backprop) —Å SGD
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 5000 —ç–ø–æ—Ö–∞—Ö —Å learning rate 0.8
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```
OLLAMA_BASE_URL=http://ollama:11434 (–∏–ª–∏ http://host.docker.internal:11434 –ª–æ–∫–∞–ª—å–Ω–æ)
OLLAMA_MODEL=gemma:7b (–∏–ª–∏ qwen:7b –∏ –¥—Ä—É–≥–∏–µ)
```

**–ó–∞–ø—É—Å–∫:**
```bash
npm install
npm run build    # typescript -> javascript
npm start        # node dist/index.js
```

---

### 4. –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–µ–±-—Å–∞–π—Ç (`site/`)
---
***–°–µ—Ä–≤–∏—Å –Ω–µ –¥–æ–¥–µ–ª–∞–Ω –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!***
---
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—É–±–ª–∏—á–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Å–∞–π—Ç

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
site/
‚îú‚îÄ‚îÄ main/          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ script.js
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îú‚îÄ‚îÄ ai/            # –†–∞–∑–¥–µ–ª AI
‚îÇ   ‚îú‚îÄ‚îÄ ai.html
‚îÇ   ‚îî‚îÄ‚îÄ scripts/aiScript.js (–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è XOR)
‚îú‚îÄ‚îÄ vpn/           # –†–∞–∑–¥–µ–ª VPN
‚îÇ   ‚îú‚îÄ‚îÄ vpn.html
‚îÇ   ‚îî‚îÄ‚îÄ styles/vpnStyle.css
‚îú‚îÄ‚îÄ convert/       # –û—Ñ—Ñ–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä JPG‚ÜíTIFF
‚îÇ   ‚îú‚îÄ‚îÄ convert.html
‚îÇ   ‚îú‚îÄ‚îÄ scripts/convertScript.js (drag&drop, Canvas, UTIF.js)
‚îÇ   ‚îî‚îÄ‚îÄ scripts/component/ (UTIF.js)
‚îú‚îÄ‚îÄ css/style.css  # –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ç–∏–ª—å (navbar –∏ —Ç.–¥.)
‚îî‚îÄ‚îÄ img/           # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (logo –∏ —Ç.–¥.)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–±–µ–∑ build-–ø—Ä–æ—Ü–µ—Å—Å–∞)
- –ú–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å —á–µ—Ä–µ–∑ GitHub Pages, Nginx –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π HTTP —Å–µ—Ä–≤–µ—Ä
- AI —Ä–∞–∑–¥–µ–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –±—Ä–∞—É–∑–µ—Ä–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é XOR —Å–µ—Ç–∏ (–æ–±—É—á–∞—é—â–∏–π –ø—Ä–∏–º–µ—Ä)
- Convert —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ñ—Ñ–ª–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Å drag&drop –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç UTIF.js –¥–ª—è TIFF –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 5. VPN —Å–µ—Ä–≤–∏—Å Xray

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ VPN —Å–µ—Ä–≤–µ—Ä–∞—Ö)

**–í–µ—Ä—Å–∏—è:** v25.x+

**–ü—Ä–æ—Ç–æ–∫–æ–ª:** VLESS + Reality + XTLS-Vision

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–¥ –æ–±—ã—á–Ω–æ–µ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ `config.json` (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±)
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —á–µ—Ä–µ–∑ gRPC API (–Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–±)

**gRPC API (–ø–æ—Ä—Ç 10085):**
```
HandlerService:
  - AddVlessUser(tag, username, uuid, flow, level)
  - RemoveUser(tag, username)
  - GetInboundUsers(tag)

StatsService:
  - GetUserStats(email, reset?)
```

**–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ [VPN —Å–µ—Ä–≤–∏—Å (Xray)](#vpn-—Å–µ—Ä–≤–∏—Å-xray)**

---

## VPN —Å–µ—Ä–≤–∏—Å (Xray)

### –ü–æ–Ω–∏–º–∞–Ω–∏–µ VLESS+Reality

**VLESS** ‚Äî –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ UUID
- –ù–µ—Ç –ø–∞—Ä–æ–ª—è, —Ç–æ–ª—å–∫–æ UUID
- –ó–∞–Ω–∏–º–∞–µ—Ç –º–∞–ª–æ —Ä–µ—Å—É—Ä—Å–æ–≤

**Reality** ‚Äî –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞:
- –¢—Ä–∞—Ñ–∏–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É –≤–µ–±-—Å–∞–π—Ç—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç X25519 –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ PublicKey –ø–∞–∫–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å VPN –ø–æ –∞–Ω–∞–ª–∏–∑—É —Ç—Ä–∞—Ñ–∏–∫–∞ (DPI-proof)

### –ö–ª—é—á–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Reality

**UUID** (–¥–ª—è VLESS):
- Format: `befcba3b-abdb-49e0-b49c-2328d1ef9f4e`
- –ì–¥–µ: –°–µ—Ä–≤–µ—Ä + –ö–ª–∏–µ–Ω—Ç (–≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ)
- –ó–∞—á–µ–º: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞

**PrivateKey** (–¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞):
- Format: Base64 (32 –±–∞–π—Ç–∞)
- –ü—Ä–∏–º–µ—Ä: `gP5TU6beS9rbpGn_n0xbvGxdp1yYVruM00XdfmmWD3g`
- –ì–¥–µ: **–¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä**, –≤ `config.json`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: `xray x25519`

**PublicKey** (–¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞):
- Format: Base64 (32 –±–∞–π—Ç–∞)
- –ü—Ä–∏–º–µ—Ä: `CrCXQXGt83iUCh0Op67DTn8vUdMzqr1ZM1isjbQUWkE`
- –ì–¥–µ: –í VLESS —Å—Å—ã–ª–∫–µ (–ø–∞—Ä–∞–º–µ—Ç—Ä `pbk=`)
- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ PrivateKey (—Å–º. —Ä–∞–∑–¥–µ–ª "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏" –≤ xray-server.md)

**ShortID**:
- Format: HEX (8-16 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü—Ä–∏–º–µ—Ä: `1cb71c73ddf63293`
- –ì–¥–µ: –ò —Å–µ—Ä–≤–µ—Ä, –∏ –∫–ª–∏–µ–Ω—Ç
- –ó–∞—á–µ–º: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ VLESS-—Å—Å—ã–ª–∫–∏

```
vless://UUID@IP:PORT?encryption=none&security=reality&fp=chrome&pbk=PUBLIC_KEY&sni=DOMAIN&sid=SHORT_ID&type=tcp&flow=xtls-rprx-vision#NAME
```

**–ü—Ä–∏–º–µ—Ä:**
```
vless://befcba3b-abdb-49e0-b49c-2328d1ef9f4e@141.164.45.6:8443?encryption=none&security=reality&fp=chrome&pbk=CrCXQXGt83iUCh0Op67DTn8vUdMzqr1ZM1isjbQUWkE&sni=pass.itinerariummentis.org&sid=1cb71c73ddf63293&type=tcp&flow=xtls-rprx-vision#Korea-VLESS
```

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|-----------|
| `encryption` | `none` | VLESS –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è |
| `security` | `reality` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REALITY –º–∞—Å–∫–∏—Ä–æ–≤–∫—É |
| `fp` | `chrome` | TLS fingerprint (–∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä) |
| `pbk` | PublicKey | –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è REALITY |
| `sni` | DOMAIN | SNI –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ serverNames –∫–æ–Ω—Ñ–∏–≥–∞) |
| `sid` | ShortID | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| `flow` | `xtls-rprx-vision` | –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Ç–æ–∫–∞ |

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ API

**TypeScript SDK:** `@remnawave/xtls-sdk`

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞:**
```typescript
import { XtlsApi } from '@remnawave/xtls-sdk';

const xtlsClient = new XtlsApi(host, port);  // host=127.0.0.1, port=10085
```

**–§—É–Ω–∫—Ü–∏–∏:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await xtlsClient.handler.addVlessUser({
  tag: 'vless-inbound',
  username: 'email@example.com',
  uuid: 'befcba3b-abdb-49e0-b49c-2328d1ef9f4e',
  flow: 'xtls-rprx-vision',
  level: 0
});

// –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await xtlsClient.handler.removeUser('vless-inbound', 'email@example.com');

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
const stats = await xtlsClient.stats.getUserStats('email@example.com', false);
// stats.data.user.uplink / downlink

// –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
await xtlsClient.stats.getUserStats('email@example.com', true);

// –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const users = await xtlsClient.handler.getInboundUsers('vless-inbound');
// users.data.users[]
```

### HTTP API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Express –º–∞—Ä—à—Ä—É—Ç—ã)

**–§–∞–π–ª:** `bot/src/services/xray-service/xrayRoutes.ts`

```typescript
// –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞
X-Admin-Token: <XRAY_ADMIN_TOKEN>

// POST /xray/users
// –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{
  "uuid": "befcba3b-abdb-49e0-b49c-2328d1ef9f4e",
  "email": "user@example.com",
  "level": 0  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}

// DELETE /xray/users/:email
// –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

// GET /xray/users/:email/stats
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
// Response: { email, stats: { uplink, downlink } }

// POST /xray/users/:email/stats/reset
// –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

// GET /xray/users
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// Response: { users: [...], count: N }

// POST /xray/vless-link
// –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VLESS —Å—Å—ã–ª–∫—É
{
  "uuid": "...",
  "serverIp": "141.164.45.6",
  "serverPort": 8443,
  "sni": "pass.itinerariummentis.org",
  "publicKey": "...",
  "shortId": "...",
  "locationName": "Korea",  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "locationFlag": "üá∞üá∑"    // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

---

## Telegram –±–æ—Ç—ã

### –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (`bot/`, @...main)

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –†–∞–±–æ—Ç–∞—é—â–∏–π, —Å –±–∞–∑–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏

**–§—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:**
- `/start` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –º–µ–Ω—é
- `/profile` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- Callback –∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–§—É–Ω–∫—Ü–∏–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**
- –í—ã–¥–∞—á–∞ VPN –∫–ª—é—á–µ–π (–ª–æ–≥–∏–∫–∞ –≥–æ—Ç–æ–≤–∞ –≤ `xrayService.ts`, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –∫–æ–º–∞–Ω–¥–∞–º)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

**–¢–æ—á–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Xray:**
```typescript
// bot/src/index.ts –∏–ª–∏ –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ vpn.ts
import { addUserToXray, generateVlessLink } from './services/xray-service/index.js';

// –ü—Ä–∏ –∫–æ–º–∞–Ω–¥–µ /key
const uuid = uuidv4();
const shortId = generateShortId();
await addUserToXray({ uuid, email: userEmail });
const vlessLink = generateVlessLink({ uuid, serverIp, ..., sni });
ctx.reply(`–í–∞—à VPN –∫–ª—é—á:\n\n${vlessLink}`);
```

### XOR –±–æ—Ç (`xor-bot/`, @infinityXorAi_bot)

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –†–∞–±–æ—Ç–∞—é—â–∏–π, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å AI —Å–µ—Ä–≤–∏—Å–æ–º

**–§—É–Ω–∫—Ü–∏–∏:**
- `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- –õ—é–±–æ–π —Ç–µ–∫—Å—Ç ‚Üí `POST /api/llm` ‚Üí AI —Å–µ—Ä–≤–∏—Å ‚Üí –æ—Ç–≤–µ—Ç

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
User: "–ü—Ä–∏–≤–µ—Ç!"
      ‚Üì
xor-bot –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
      ‚Üì
fetch POST http://ai-service-backend:3000/api/llm
      {
        "prompt": "–ü—Ä–∏–≤–µ—Ç!"
      }
      ‚Üì
AI —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ Ollama
      ‚Üì
Ollama –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç (Gemma/Qwen)
      ‚Üì
xor-bot –ø–æ–ª—É—á–∞–µ—Ç { response: "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?" }
      ‚Üì
User –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
```

---

## AI —Å–µ—Ä–≤–∏—Å

**–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞—é—â–∏–π

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **Ollama –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `OLLAMA_BASE_URL`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–µ–ª—å –∏–∑ `OLLAMA_MODEL`
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å –ª–æ–∫–∞–ª—å–Ω–∞—è (–≤ Docker) –∏–ª–∏ –≤–Ω–µ—à–Ω—è—è

2. **SimpleNN (XOR –Ω–µ–π—Ä–æ—Å–µ—Ç—å)**
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –Ω—É–ª—è –Ω–∞ TypeScript
   - 2 –≤—Ö–æ–¥–∞ (X,Y) ‚Üí 4 —Å–∫—Ä—ã—Ç—ã—Ö ‚Üí 1 –≤—ã—Ö–æ–¥
   - –°–∏–≥–º–æ–∏–¥–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
   - SGD + backprop –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

3. **Express API**
   - `/health/ollama` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - `/api/llm` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ Ollama
   - `/api/xor-predict` ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ XOR

**–ó–∞–ø—É—Å–∫:**
```bash
# Development (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm run dev

# Production
npm install
npm run build
npm start
```

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** PostgreSQL –≤–Ω–µ—Å–µ–Ω–∞ –≤ `docker-compose.yml` –≤ –ø–ª–∞–Ω—ã, –Ω–æ **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –∫–æ–¥–µ**

**–ß—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å:**
```
TABLE User
  - id, telegramId, username, plan (free/premium), status, createdAt

TABLE Server
  - id, hostname, ip, location, port, status, createdAt

TABLE VpnKey
  - id, userId, serverId, uuid, shortId, sni, port, isActive, expiresAt
```

**–í–∞–∂–Ω–æ:** –°–µ–π—á–∞—Å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –∏–ª–∏ –≤ Xray –∫–æ–Ω—Ñ–∏–≥–µ. –î–ª—è production –Ω—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å PostgreSQL.

---

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Development (–ª–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞)

**–í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (–ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)**

```bash
docker-compose up --build

# –≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
# - ollama (–º–æ–¥–µ–ª–∏ –≤ —Ç–æ–º–µ /root/.ollama)
# - ai-service-backend (–ø–æ—Ä—Ç 3000 –≤–Ω—É—Ç—Ä–∏ Docker)
# - bot (–ø–æ—Ä—Ç 3001 –≤–Ω—É—Ç—Ä–∏ Docker)
# - xor-bot (no ports, –≤–Ω—É—Ç—Ä–∏ Docker)
# - –í—Å–µ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ app-network
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: AI —Å–µ—Ä–≤–∏—Å
cd backend/ai-service-backend
docker run -e OLLAMA_BASE_URL=http://host.docker.internal:11434 -e OLLAMA_MODEL=gemma:7b -p 3000:3000 <image>

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
cd bot
npm run dev

# –¢–µ—Ä–º–∏–Ω–∞–ª 3: XOR –±–æ—Ç
cd xor-bot
npm run dev

# –û—Ç–¥–µ–ª—å–Ω–æ: Ollama (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è)
ollama serve
```

### Production (—Å–µ—Ä–≤–µ—Ä mySrv)

**1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)**

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh vpnadmin@62.181.44.4

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url> infinity
cd infinity

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–æ–≤
# (–∫–∞–∫ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version
docker-compose --version
```

**2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**

```bash
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
docker-compose logs -f

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# - ollama
# - ai-service-backend
# - bot
# - xor-bot
```

**3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞**

```bash
git pull origin main
docker-compose up -d --build

# –ò–ª–∏ –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω—ã .env
docker-compose restart
```

**4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f bot
docker-compose logs -f ai-service-backend

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats
```

**5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Ç–æ–º–∞ (–í–ù–ò–ú–ê–ù–ò–ï!)
docker-compose down -v
```

### CI/CD –ø—Ä–æ—Ü–µ—Å—Å

**–¢–µ–∫—É—â–∏–π flow (manual):**

1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–ª–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ
2. –ö–æ–º–º–∏—Ç–∏—Ç –≤ `main` –≤–µ—Ç–∫—É –Ω–∞ GitHub
3. –í—Ä—É—á–Ω—É—é –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ SSH –Ω–∞ mySrv
4. –í—ã–ø–æ–ª–Ω—è–µ—Ç `git pull` –∏ `docker-compose up -d --build`

**–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):**
- GitHub Actions ‚Üí ssh –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Üí git pull ‚Üí docker-compose up
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker-compose ps

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama
curl http://localhost:11434/api/tags

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ AI —Å–µ—Ä–≤–∏—Å–∞
curl http://localhost:3000/health/ollama

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
curl -X POST http://localhost:3001/api/xray/users \
  -H "X-Admin-Token: <TOKEN>" \
  -H "Content-Type: application/json" \
  -d '{"uuid":"test-uuid","email":"test@example.com"}'

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Xray API
xray api inbounduser --server=127.0.0.1:10085 --tag=vless-inbound
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å:**
- `docker-compose logs -f` ‚Äî –≤—Å–µ –ª–æ–≥–∏
- `docker-compose logs -f bot` ‚Äî –ª–æ–≥–∏ –±–æ—Ç–∞
- –ö–æ–Ω—Å–æ–ª—å –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `console.log` –∏ `console.error`)

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**
- `[XtlsClient]` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Xray API
- `[XrayService]` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `[XrayRoutes]` ‚Äî HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ API
- –û—à–∏–±–∫–∏ –∏ stack traces

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** "409 Conflict: another user already running the bot"
**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—Ä—É–≥–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –±–æ—Ç–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–æ–∫–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** Xray API –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω (10085 –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Xray –∑–∞–ø—É—â–µ–Ω –∏ —Å–ª—É—à–∞–µ—Ç –Ω–∞ 127.0.0.1:10085

**–ü—Ä–æ–±–ª–µ–º–∞:** AI —Å–µ—Ä–≤–∏—Å –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç Ollama
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `OLLAMA_BASE_URL` (–¥–ª—è Docker —ç—Ç–æ `http://ollama:11434`)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** `docker-compose logs <service>` ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫—É –≤ –ª–æ–≥–∞—Ö

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –í–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í–µ—Ä—Å–∏—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|-----------|
| Node.js | 20.5.0+ | –í Dockerfile |
| TypeScript | latest | dev dependency |
| grammY | latest | Telegram API |
| Xray | 25.x+ | –ù–∞ VPN —Å–µ—Ä–≤–µ—Ä–∞—Ö |
| Docker | latest | –ù–∞ mySrv |
| PostgreSQL | (–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞) | –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| Ollama | latest | –ö–∞–∫ Docker —Å–µ—Ä–≤–∏—Å |

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# Docker
docker build -t myimage .
docker run -d --name mycontainer myimage
docker exec -it mycontainer bash
docker logs mycontainer

# Docker Compose
docker-compose config  # –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
docker-compose ps
docker-compose up -d --build
docker-compose down

# TypeScript
tsc --init
npm run build
npm run dev

# Git
git status
git add .
git commit -m "message"
git push origin main
git pull origin main

# Telegram Bot Token
# –ü–æ–ª—É—á–∏—Ç—å –≤ @BotFather
# https://t.me/BotFather
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

- **Telegram Bot API:** https://core.telegram.org/bots/api
- **grammY –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://grammy.dev
- **Xray –ø—Ä–æ–µ–∫—Ç:** https://github.com/XTLS/Xray-core
- **Ollama:** https://ollama.ai
- **Docker –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://docs.docker.com

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –í—Å–µ `.env` —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–µ–∫—Ä–µ—Ç—ã –∏ –ù–ï –¥–æ–ª–∂–Ω—ã –∫–æ–º–º–∏—Ç—å—Å—è –≤ Git
   - `XRAY_ADMIN_TOKEN` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è HTTP API)
   - PrivateKey –¥–ª—è Xray Reality —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–∫—Ä–µ—Ç–µ

2. **Production ready:**
   - ‚úÖ Docker Compose —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ XOR –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ AI —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚ùå PostgreSQL –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
   - ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ (–Ω–µ—Ç –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª)
   - ‚ùå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - ‚ùå Backup —Å–∏—Å—Ç–µ–º—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

3. **–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
   - –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–∞–∂–¥–æ–≥–æ –±–æ—Ç–∞ (Telegram —Ä–∞–∑—Ä–µ—à–∞–µ—Ç)
   - –ù–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ HTTP API (—Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ)
   - –ù–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä)
   - –ù–µ—Ç failover –¥–ª—è VPN —Å–µ—Ä–≤–µ—Ä–æ–≤

4. **–ß—Ç–æ –ù–ï –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ (—Ç–∞–∫ –∫–∞–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ):**
   - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–µ–±-—Å–∞–π—Ç (`site/`) ‚Äî —Ç–æ–ª—å–∫–æ –æ–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –ë—É–¥—É—â–∏–π VPN backend (`backend/vpn-service-backend/`)
   - –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PostgreSQL (–ø–æ–ª–Ω–∞—è)
   - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 3 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2.0  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞:** Debian 13, Docker 24.x, Node.js 20.5.0
